# Инструкция по тестированию Help Editor v1.4.0

## Подготовка

### Установка

```bash
cd help-editor
npm install
```

> TinyMCE скачается автоматически в `assets/tinymce/`.

### Запуск

```bash
npm start
```

Должно открыться окно браузера на `http://localhost:3000` (или следующий свободный порт).

---

## Сценарии тестирования

### 1. Стартовый экран

- [ ] Открывается страница с заголовком «Help Editor» и двумя кнопками
- [ ] Кнопка «Создать новый проект» → открывает диалог создания
- [ ] Кнопка «Открыть существующий» → открывает выбор папки

### 2. Создание проекта (современный шаблон)

1. Нажать «Создать новый проект»
2. Указать пустую папку
3. Убедиться что шаблон **Современный** выбран по умолчанию
4. Нажать «Создать»
5. Проверить:
   - [ ] Проект открылся, слева дерево с разделом «Главная»
   - [ ] Файл `.helpeditor.json` создан в папке проекта
   - [ ] Файлы шаблона скопированы (`default.css`, `index.html`, `hmcontent.htm` и др.)

### 3. Открытие существующего проекта

1. Нажать «Открыть существующий»
2. Указать папку с `.htm` файлами (например, базу справки `ru-RU`)
3. Проверить:
   - [ ] Дерево разделов загрузилось корректно
   - [ ] Можно переключаться между разделами
   - [ ] Содержимое отображается в редакторе

### 4. Редактирование

- [ ] Текст можно вводить и форматировать (жирный, курсив, списки)
- [ ] Вставка таблицы работает
- [ ] Вставка изображения (загрузка файла) работает
- [ ] Вставка ссылки работает
- [ ] Изменения сохраняются при переключении раздела
- [ ] Кнопка «Сохранить» (Ctrl+S) сохраняет текущий файл

### 5. Управление разделами

- [ ] Создание нового раздела (правый клик → Добавить)
- [ ] Переименование раздела
- [ ] Удаление раздела (с подтверждением)
- [ ] Перемещение раздела (drag & drop в дереве)

### 6. Сборка

1. Нажать кнопку «Сборка» в панели инструментов
2. Проверить:
   - [ ] Диалог показывает прогресс генерации
   - [ ] Файлы `helpCodes.xml`, `helpCodes.js`, `toc.js`, `hmcontent.htm`, `search_index.js` созданы
   - [ ] Файлы шаблона скопированы в папку сборки
   - [ ] Сообщение об успешной сборке

### 7. Публикация

1. Нажать кнопку «Публикация»
2. Указать исходную папку (результат сборки) и целевую папку
3. Проверить:
   - [ ] Все файлы скопированы в целевую папку
   - [ ] Сообщение об успехе с количеством файлов

### 8. Смена шаблона

1. Нажать кнопку «Шаблон»
2. Выбрать другой шаблон (Legacy ↔ Современный)
3. Выполнить сборку
4. Проверить:
   - [ ] При сборке используется выбранный шаблон
   - [ ] Файлы шаблона соответствуют выбору

### 9. Предпросмотр собранной справки

Открыть `index.html` из папки сборки в браузере.

**Desktop (≥ 1024px):**
- [ ] Тёмно-синий header вверху с логотипом «Directum RX» и полем поиска
- [ ] Слева — боковая панель с деревом разделов
- [ ] Справа — контент выбранного раздела
- [ ] Ресайзер боковой панели работает (перетаскивание границы)
- [ ] Кнопка сворачивания `◂` скрывает/показывает панель
- [ ] `Ctrl+K` — фокус на поле поиска в header
- [ ] URL обновляется при навигации (`?page_name.htm`)
- [ ] Title страницы обновляется при навигации

**Mobile (≤ 768px):**
- [ ] Боковая панель скрыта по умолчанию
- [ ] Кнопка ☰ (гамбургер) открывает sidebar с overlay
- [ ] Клик на overlay или переход по ссылке закрывает sidebar
- [ ] Контент адаптируется к узкому экрану

**Стили контента:**
- [ ] Заголовки h1–h3 имеют синий цвет (Directum RX navy)
- [ ] h1 с нижней линией
- [ ] h2 с тонкой разделительной линией
- [ ] Таблицы с uppercase-заголовками, полоской зебры и hover
- [ ] Ссылки синие, при наведении — оранжевые с подчёркиванием
- [ ] Код `inline` выделен фоном
- [ ] Блок кода `pre` с рамкой и серым фоном
- [ ] Изображения-скриншоты с тонкой рамкой и тенью
- [ ] Блоки: .note (синий, «ПРИМЕЧАНИЕ»), .warning (жёлтый, «ВНИМАНИЕ»), .tip (зелёный, «СОВЕТ»)

**Поиск:**
- [ ] Ввод запроса в header и Enter → открывается страница поиска с результатами
- [ ] Результаты показываются как карточки с заголовком, хлебными крошками и сниппетом
- [ ] Подсветка найденных слов жёлтым цветом
- [ ] Пагинация работает при > 15 результатах
- [ ] Подсказки при вводе (автодополнение)

### 10. Печать

1. Открыть страницу справки
2. `Ctrl+P`
3. Проверить:
   - [ ] Шрифты чёрные, ссылки подчёркнуты
   - [ ] Таблицы и изображения не обрезаются
   - [ ] Блоки примечаний имеют рамку

---

## Известные ограничения

- TinyMCE требует загрузки при первом `npm install` (нужен интернет)
- В legacy-шаблоне обновляется только `helpeditor_init.js`, остальные файлы шаблона остаются от H&M
- Поиск работает только если был выполнен шаг «Сборка» (генерация `search_index.js`)
- На `file://` протоколе ограничена навигация между iframe (рекомендуется HTTP-сервер)

## Окружение для тестирования

| Браузер | Поддержка |
|---------|-----------|
| Chrome 90+ | Полная |
| Firefox 90+ | Полная |
| Edge 90+ | Полная |
| Safari 15+ | Полная |

| ОС | Поддержка |
|----|-----------|
| Windows 10/11 | Полная |
| macOS 12+ | Полная |
| Linux | Веб-режим |
